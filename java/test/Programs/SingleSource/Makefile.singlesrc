##==-- test/Programs/SingleSource/Makefile.singlesrc -----*- makefile -*--====##
#
#                     The LLVM Compiler Infrastructure
#
# This file was developed by the LLVM research group and is distributed under
# the University of Illinois Open Source License. See LICENSE.TXT for details.
#
##===----------------------------------------------------------------------===##

# rule to build raw bytecode from a classfile
%.raw.bc: %.class $(CLASS2LLVM)
	$(Echo) Compiling $< to bytecode
	$(Verb)$(CLASS2LLVM) -cp $(CLASSPATH):Output $(subst /,.,$(*F)) -o=$@

# optimize raw bytecode
%.linked.bc: %.raw.bc $(LOPT)
	$(Echo) Optimizing $<
	$(Verb)$(LOPT) -simplifycfg -mem2reg -instcombine -f -o=$@ $<

include $(LEVEL)/test/Makefile.test
