Framework launched
AImpl provides A
BImpl exports and provides B
BImpl got A @ startup
BImpl got Token from A
> bundles
   id  level/state name
   --------------------
   11  1/active    A                  13  1/active    A Implementation
   14  1/active    B Implementation   10  1/active    J3 Virtual Machine Manager
   ...
> framework call j3.J3Mgr dumpClassLoaderBundles
...
classLoader=0xb4391f0	bundleID=11
...
classLoader=0xb413318	bundleID=13
classLoader=0xb503a30	bundleID=14
...
> framework call j3.J3Mgr resetReferencesToBundle ijvm.tests.AImpl
resetReferencesToBundle: #13 ijvm.tests.AImpl
Stopping bundle: ijvm.tests.AImpl
AImpl no more provides A
...
BImpl lost A but keeps a stale reference to it
Uninstalling bundle: ijvm.tests.AImpl
Refreshing framework...
...
Resetting stale references to bundle #13
Resetting ref=0x502a7d9c obj=0x50372cb0(class=ijvm/tests/AImpl/TokenImpl) source=0x502a7d94(class=[Ljava/lang/Object;)
Resetting ref=0x502a7d68 obj=0x50006184(class=ijvm/tests/AImpl/AImpl) source=0x502a7d60(class=[Ljava/lang/Object;)
WARNING: Source object is stale source=0x50372cb0(class=ijvm/tests/AImpl/TokenImpl)
WARNING: Source object is stale source=0x50006184(class=ijvm/tests/AImpl/AImpl)
Resetting ref=0x515f420c obj=0x514a50a4(class=ijvm/tests/AImpl/Activator) source=0x515f4204(class=org/knopflerfish/framework/ServiceListenerEntry)
WARNING: Ignored stale reference ref=0x5158339c obj=0x503729e0(class=j3::VMClassLoader,loader=0xb413318,javaLoader=0x51583384,javaClass=org/knopflerfish/framework/BundleClassLoader) source=0x51583384(class=org/knopflerfish/framework/BundleClassLoader)
Bundle class loader unloaded, bundleID=13
> bundles
   id  level/state name
   --------------------
   11  1/active    A                       14  1/active    B Implementation
   10  1/active    J3 Virtual Machine Manager
   ...
> framework call j3.J3Mgr dumpClassLoaderBundles
classLoader=0xb4391f0	bundleID=11
...
classLoader=0xb503a30	bundleID=14